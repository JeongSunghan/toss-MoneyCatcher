<!-- index.html -->
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>머니 캐쳐</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#5C94FC" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="머니 캐쳐" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-TileColor" content="#5C94FC" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar-left">
      <button id="btn-share" class="ghost sm">공유</button>
      <button id="btn-report" class="ghost sm" hidden>토스 앱 열기</button>
    </div>
    <div class="toggles">
      <button id="btn-pause" title="일시정지" class="ghost sm">Ⅱ</button>
      <button id="btn-mute" title="음소거" class="ghost sm">🔊</button>
    </div>
  </header>

  <main class="stage">
    <div class="game-container">
      <div class="canvas-wrap">
        <canvas id="game" width="360" height="520" aria-label="게임 화면" role="img"></canvas>

        <!-- 콤보 바 (게임 내부) -->
        <div class="combo-wrap">
          <div class="combo-label">COMBO</div>
          <div class="combo-bar"><div id="combo-fill" class="combo-fill"></div></div>
          <div id="combo-mult" class="combo-mult">×1</div>
        </div>

        <!-- 하트 표시 (게임 내부) -->
        <div id="hearts-display" class="hearts-display">
          <span class="heart-icon">❤️</span>
          <span id="hearts-count" class="hearts-count">×5</span>
        </div>

        <!-- 배너 -->
        <div id="banner" class="banner" hidden></div>
      </div>

      <!-- 사이드바: 점수 및 정보 표시 (테트리스 스타일) -->
      <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
          <h1>머니 캐쳐</h1>
        </div>
        <div class="sidebar-content">
          <div class="stat-card">
            <div class="stat-label">점수</div>
            <div id="score" class="stat-value">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">콤보</div>
            <div id="combo" class="stat-value combo-value">×1</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">레벨</div>
            <div id="level" class="stat-value">LV 1</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">최고 점수</div>
            <div id="hi" class="stat-value">0</div>
          </div>
          <div class="stat-card" id="debuff-card">
            <div class="stat-label debuff-label">디버프</div>
            <div id="debuff-text" class="stat-value debuff-value">대기 중</div>
            <div id="debuff-desc" class="debuff-desc" hidden></div>
            <div id="debuff-timer" class="debuff-timer" hidden></div>
            <div id="debuff-next" class="debuff-next"></div>
          </div>
        </div>
      </aside>
    </div>

    <!-- 오버레이 -->
    <div id="overlay" class="overlay">
      <div class="panel">
        <h2 id="ov-title">머니 캐쳐</h2>
        <p id="ov-sub">좌,우 스와이프 또는 방향키로 요원을 이동하세요.</p>
        <div class="row">
          <button id="btn-start" class="primary">GAME START</button>
        </div>
        <div class="row">
          <button id="btn-tutorial" class="ghost">TUTORIAL</button>
        </div>
        <div class="row small"><span>같은 종류 연속 수집 시 콤보 유지</span></div>
      </div>
    </div>

    <!-- 튜토리얼 오버레이 -->
    <div id="tutorial-overlay" class="overlay" hidden>
      <div class="panel tutorial-panel">
        <h2>튜토리얼</h2>
        <div class="tutorial-content">
          <p><strong>게임 방법:</strong></p>
          <ul>
            <li>좌우 스와이프 또는 방향키로 요원을 이동하세요</li>
            <li>돈(₩), 포인트(P), 쿠폰(%)을 받으세요</li>
            <li>세금(TAX), 빚(DEBT)은 피하세요</li>
            <li>돈, 포인트, 쿠폰 을 연속으로 받으면 콤보가 쌓입니다</li>
            <li>콤보가 높을수록 점수 배수가 증가합니다</li>
            <li>아이템을 놓치면 생명이 감소합니다 (최대 5개) </li>
          </ul>
          <p><strong>콤보 배수:</strong></p>
          <ul>
            <li>10+ 콤보: 0.25배</li>
            <li>20+ 콤보: 0.5배</li>
            <li>30+ 콤보: 0.75배</li>
            <li>40+ 콤보: 1.25배</li>
            <li>50+ 콤보: 1.5배 (MAX COMBO!!!)</li>
          </ul>
        </div>
        <div class="row">
          <button id="btn-close-tutorial" class="primary">닫기</button>
        </div>
      </div>
    </div>
  </main>

  <!-- 선택 오디오 -->
  <audio id="sfx-catch"  src="assets/sound/catch_coin.mp3" preload="auto"></audio>
  <audio id="sfx-penalty" src="assets/sound/minus item.mp3"    preload="auto"></audio>
  <audio id="sfx-combo"   src="assets/sound/combo_up.mp3"    preload="auto"></audio>
  <audio id="sfx-clear"   src="assets/sound/level_up.mp3" preload="auto"></audio>
  <audio id="bgm"         src="assets/sound/background.mp3"    preload="auto" loop></audio>
 

  <!-- 모듈 스크립트 (순서 중요) -->
  <script src="js/config.js"></script>
  <script src="js/debuffs.js"></script>
  <script src="js/items.js"></script>
  <script src="js/combo.js"></script>
  <script src="js/agent.js"></script>
  <script src="js/input.js"></script>
  <script src="js/render.js"></script>
  <script src="js/ui.js"></script>
  
  <!-- 메인 게임 스크립트 -->
  <script src="game.js"></script>
</body>
</html>
